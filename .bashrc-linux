# Set the paths
PATH=~/bin:/usr/local/bin:/usr/local/sbin:${PATH}

# JAVA_HOME
JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64/jre

# Source aliasrc
source ~/.aliasrc

# leverage nventory for ssh connections
nvssh () {
  ssh $(nv --exclude status=decom --name $1 | head -n1)
}

nvrssh () {
  ssh -l root $(nv --exclude status=decom --name $1 | head -n1)
}

nvcssh () {
  cssh $(nv --exclude status=decom --name $1 | awk -v ORS=' ' 1) 
}

nvami () {
  nv  --objecttype node_groups --exactget name=aws1 --get graffitis[name]=$1 --fields value
}

nvlistami () {
  nv --objecttype node_groups --exactget name=aws1 --get graffitis[name]=ami --field name,value
}

# AWS tools
if [[ -d $HOME/dev/svn/operations/cg-cloud-tools/trunk ]]; then
  AWS_BASE_DIR=$HOME/dev/svn/operations/cg-cloud-tools/trunk
  AWS_CRED_DIR=$HOME/dev/creds/aws
  PROJECT_CRED_DIR=$HOME/dev/creds/project_cred
  PROJECT_BASE_DIR=$HOME/operations/cg-cloud-tools/projects/projects
  PYTHONPATH=${AWS_BASE_DIR}/python_libs:${HOME}/dev/boto
  PATH=${PATH}:${AWS_BASE_DIR}/bin
  export AWS_BASE_DIR AWS_CRED_DIR PROJECT_CRED_DIR PROJECT_BASE_DIR PYTHONPATH PATH

  # Generate aws alias profiles for each account
  for account in $(find $AWS_CRED_DIR -mindepth 1 -maxdepth 1 -type d -print | sed 's@.*/@@'); do
    alias aws${account}="unset AWS_CREDENTIAL_FILE
    eval \`awsprofile ${account}\`"
  done
fi

# EC2 tools
EC2_HOME=/home/jesco/dev/ec2-api-tools-1.6.7.4
PATH=${PATH}:${EC2_HOME}/bin
export EC2_HOME PATH
